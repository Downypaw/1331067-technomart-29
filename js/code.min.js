const linksBuy=document.querySelectorAll(".buy-button"),buttonClose=document.querySelector(".modal-button-white"),popupMessage=document.querySelector(".modal-window-message"),closes=document.querySelectorAll(".modal-close"),close=document.querySelector(".modal-close"),innerPage=document.querySelector(".inner-page"),page=document.querySelector(".page");if(page){const e=document.querySelector(".map"),t=document.querySelector(".write-us-button"),s=document.querySelector(".modal-window-map"),l=document.querySelector(".modal-window-form"),o=l.querySelector(".form-letter"),a=l.querySelector("[name=name]"),n=l.querySelector("[name=email]"),c=l.querySelector("[name=letter]"),d=document.querySelector(".button-prev"),i=document.querySelector(".button-next"),r=(document.querySelectorAll(".slide"),document.querySelector(".menu-delivery")),u=document.querySelector(".menu-guarantee"),m=document.querySelector(".menu-credit"),v=document.querySelector(".section-delivery"),L=document.querySelector(".section-guarantee"),f=document.querySelector(".section-credit"),y=document.querySelector(".slide-controls");o.addEventListener("submit",function(e){a.value&&n.value&&c.value?(localStorage.setItem("name",a.value),localStorage.setItem("email",n.value)):(e.preventDefault(),o.classList.remove("modal-error"),o.offsetWidth=o.offsetWidth,o.classList.add("modal-error"))}),r.addEventListener("click",function(e){e.preventDefault(),v.classList.remove("hidden-slide"),r.classList.add("active-menu"),L.classList.add("hidden-slide"),f.classList.add("hidden-slide"),r.classList.add("active-menu"),u.classList.remove("active-menu"),m.classList.remove("active-menu")}),u.addEventListener("click",function(e){e.preventDefault(),L.classList.remove("hidden-slide"),u.classList.add("active-menu"),r.classList.remove("active-menu"),m.classList.remove("active-menu"),v.classList.add("hidden-slide"),f.classList.add("hidden-slide")}),m.addEventListener("click",function(e){e.preventDefault(),f.classList.remove("hidden-slide"),m.classList.add("active-menu"),L.classList.add("hidden-slide"),v.classList.add("hidden-slide"),m.classList.add("active-menu"),r.classList.remove("active-menu"),u.classList.remove("active-menu")}),y.addEventListener("click",function(e){let t=e.target;currentSlide(Array.from(document.getElementsByClassName("button-slide")).indexOf(t)+1)});let p=2;function currentSlide(e){showSlides(p=e),addActiveClass(p)}function addActiveClass(e){let t=document.getElementsByClassName("button-slide");for(let e of t)e.classList.remove("button-slide-active");t[p-1].classList.add("button-slide-active")}function showSlides(e){let t=document.getElementsByClassName("slide");e>t.length&&(p=1),e<1&&(p=t.length);for(let e of t)e.style.display="none";t[p-1].style.display="block"}showSlides(p),i.addEventListener("click",function(){showSlides(p+=1),addActiveClass(p)}),d.addEventListener("click",function(){showSlides(p-=1),addActiveClass(p)}),currentSlide(p),window.addEventListener("keydown",function(e){27===e.keyCode&&l.classList.contains("modal-show")&&(e.preventDefault(),l.classList.remove("modal-show"),o.classList.remove("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&s.classList.contains("modal-show")&&(e.preventDefault(),s.classList.remove("modal-show"))});let h=!0,S={name:"",email:""};try{S.name=localStorage.getItem("name"),S.email=localStorage.getItem("email")}catch(e){h=!1}closes.forEach(e=>e.addEventListener("click",function(e){e.preventDefault(),s.classList.remove("modal-show")})),closes.forEach(e=>e.addEventListener("click",function(e){e.preventDefault(),l.classList.remove("modal-show"),o.classList.remove("modal-error")})),e.addEventListener("click",function(e){e.preventDefault(),s.classList.add("modal-show")}),t.addEventListener("click",function(e){e.preventDefault(),l.classList.add("modal-show"),S.name&&S.email?(a.value=S.name,n.value=S.email,c.focus()):S.name&&!S.email?(a.value=S.name,n.focus()):!S.name&&S.email?(n.value=S.email,a.focus()):a.focus()})}window.addEventListener("keydown",function(e){27===e.keyCode&&popupMessage.classList.contains("modal-show")&&(e.preventDefault(),popupMessage.classList.remove("modal-show"))}),closes.forEach(e=>e.addEventListener("click",function(e){e.preventDefault(),popupMessage.classList.remove("modal-show")})),buttonClose.addEventListener("click",function(e){e.preventDefault(),popupMessage.classList.remove("modal-show")}),linksBuy.forEach(e=>e.addEventListener("click",function(e){e.preventDefault(),popupMessage.classList.add("modal-show")}));
